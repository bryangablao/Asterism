<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/png" href="px/a/Asterism Logo.png">
<title>â€» - Log in or sign up</title>
<style>
:root {
  --input-text: #cfcfe6;
  --input-active: #ffffff;
}
* { box-sizing: border-box; font-family: Arial, Helvetica, sans-serif; }
body {
  background: #0f0f14;
  margin: 0;
  color: #fff;
}
.page {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
}
/* AUTH AREA */
.auth-section {
  width: 100%;
  display: flex;
  justify-content: center;
  padding: 40px 0 10px;
}
.scene {
  width: 350px;
  perspective: 1000px;
}
.card {
  position: relative;
  transform-style: preserve-3d;
  transition: transform 0.8s;
}
.card.flip { transform: rotateY(180deg); }
.container {
  width: 100%;
  backface-visibility: hidden;
  background: #1a1a25;
  padding: 25px;
  border-radius: 10px;
  box-shadow: 0 0 30px rgba(0,0,0,0.6);
}
.container.register {
  position: absolute;
  top: 0;
  transform: rotateY(180deg);
}
h1 { text-align: center; margin-bottom: 10px; }
label { font-size: 13px; color: #aaa; }
.container input,
.container select {
  width: 100%;
  padding: 10px;
  margin: 6px 0 10px;
  background: #2a2a3d;
  border: none;
  border-radius: 5px;
  outline: none;
  color: var(--input-active);
  font-size: 14px;
}
.container input::placeholder { color: var(--input-text); }
.container select { color: var(--input-text); }
.container select:valid { color: var(--input-active); }
.container .link {
  color: var(--input-text);
  margin-top: 12px;
  text-align: center;
  cursor: pointer;
  font-size: 14px;
}
.container .link:hover { color: var(--input-active); }
select {
  appearance: none;
  background-image:
    linear-gradient(45deg, transparent 50%, #aaa 50%),
    linear-gradient(135deg, #aaa 50%, transparent 50%);
  background-position:
    calc(100% - 18px) calc(50% - 2px),
    calc(100% - 12px) calc(50% - 2px);
  background-size: 6px 6px;
  background-repeat: no-repeat;
  padding-right: 32px;
}
select option { color: #000; }
button {
  width: 100%;
  padding: 10px;
  background: #4b5cff;
  border: none;
  color: white;
  border-radius: 5px;
  cursor: pointer;
}
button:disabled { background: #333; cursor: not-allowed; }
/* STATUS MESSAGE */
.status {
  margin-top: 12px;
  font-size: 13px;
  color: #ff8a8a;
  min-height: 16px;
  text-align: center;
}
/* INTRO */
.intro {
  max-width: 900px;
  padding: 50px 25px 70px;
  text-align: center;
  color: #cfcfe6;
}
.intro h2 { color: #fff; margin-bottom: 20px; }
.intro p { line-height: 1.9; margin-bottom: 18px; }
/* FOOTER */
footer {
  padding: 20px;
  font-size: 13px;
  color: #888;
  text-align: center;
}
footer a {
  color: #aaa;
  text-decoration: none;
}
footer a:hover { text-decoration: underline; }
/* MOBILE */
@media (max-width: 420px) { .scene { width: 90%; } }
.row { display: flex; gap: 10px; }
.row > * { flex: 1; }
@media (max-width: 420px) { .row { flex-direction: column; } }
.row select, .row input[type="date"] { height: 42px; }
.email-group {
  display: flex; width: 100%; height: 37px; background: #2a2a3d;
  border-radius: 5px; overflow: hidden; border: 1px solid transparent;
  margin: 6px 0 10px; align-items: center;
}
.email-group input {
  flex: 1; height: 100%; padding: 0 10px; background: transparent;
  border: none; color: white; font-size: 14px; line-height: normal;
  display: flex; align-items: center;
}
.email-suffix {
  height: 100%; padding: 0 12px; display: flex; align-items: center;
  background: transparent; color: var(--input-text); font-size: 14px; white-space: nowrap;
}
.email-group:focus-within { border-color: #ffffff; }
.email-group:focus-within .email-suffix { color: var(--input-active); }
.container input[type="password"] { margin-bottom: 16px; }
.register-subtitle {
  text-align: center; margin: 6px 0 18px; font-size: 14px;
  color: #cfcfe6; letter-spacing: 0.4px; position: relative;
}
.register-subtitle::after {
  content: ""; display: block; width: 40px; height: 2px;
  background: linear-gradient(to right, transparent, #4b5cff, transparent);
  margin: 10px auto 0; opacity: 0.8;
}
.divider {
  width: 100%; height: 1px;
  background: linear-gradient(to right, transparent, #2a2a3d, transparent);
  margin: 40px 0 20px;
}
</style>
</head>
<body>

<div class="page">
  <div class="auth-section">
    <div class="scene">
      <div class="card" id="card" style="height: 291px;">
        
        <!-- LOGIN -->
        <div class="container login" id="loginBox">
          <h1>â€» Login</h1>
          <input type="email" name="email" placeholder="Email" autocomplete="username" required>
          <input type="password" name="login_password" placeholder="Password" autocomplete="current-password" required>
          <button id="loginBtn">Login</button>
          <div class="link" onclick="flipCard()">Create an account</div>
        </div>

        <!-- REGISTER -->
        <div class="container register" id="registerBox">
          <h1>â€» Register</h1>
          <p class="register-subtitle">Join us â€“ itâ€™s fast and easy</p>
          <input type="text" name="first_name" placeholder="First Name" required>
          <input type="text" name="last_name" placeholder="Last Name" required>
          <input type="text" name="middle_name" placeholder="Middle Name" required>
          <input type="tel" name="contact_number" placeholder="Contact Number" required>
          <select name="country" required>
            <option value="" disabled selected>Nationality / Country</option>
            <option>Philippines</option>
            <option>United States</option>
            <option>Japan</option>
            <option>France</option>
            <option>Mexico</option>
            <option>Singapore</option>
            <option>India</option>
            <option>Thailand</option>
            <option>China</option>
            <option>South Korea</option>
            <option>Australia</option>
            <option>Switzerland</option>
            <option>Other</option>
          </select>
          <div class="row">
            <div>
              <label>Gender</label>
              <select name="gender" required>
                <option value="" disabled selected>Select gender</option>
                <option>Male</option>
                <option>Female</option>
                <option>Other</option>
              </select>
            </div>
            <div>
              <label>Birthdate</label>
              <input type="date" name="birthdate" required>
            </div>
          </div>
          <div class="email-group">
            <input type="email" name="username" placeholder="Email / Username" autocomplete="username" required>
            <div class="email-suffix">@asterism.com</div>
          </div>
          <input type="password" name="register_password" placeholder="Password" autocomplete="new-password" required>
          <button id="registerBtn">Register</button>
          <div class="link" onclick="flipCard()">â¬… Back to Sign In</div>
        </div>

      </div>
      <div class="status" id="statusMsg"></div>
    </div>
  </div>

  <div class="intro">
    <h2>Welcome to Asterism</h2>
    <p>
      Asterism is a space where ideas align, curiosity thrives, and exploration
      never stops. Inspired by the stars above us, it represents how individual
      points can connect into something meaningful.
    </p>
    <p>
      This is a place for people who want to discover, experiment, and grow â€”
      freely and authentically.
    </p>
  </div>

  <div class="divider"></div>

  <footer>
    Â© 2026 Asterism â€» Â· All rights reserved Â·
    <a href="terms.html" class="footer-link">Terms & Privacy</a>
    <p style="margin-top:10px;">
      Questions? Contact us at
      <a href="mailto:accxs.asterism@gmail.com">accxs.asterism@gmail.com</a>
    </p>
  </footer>
</div>

<script>
const card = document.getElementById("card");
const loginBox = document.getElementById("loginBox");
const registerBox = document.getElementById("registerBox");
const statusMsg = document.getElementById("statusMsg");

function resizeCard() {
  const active = card.classList.contains("flip") ? registerBox : loginBox;
  card.style.height = active.offsetHeight + "px";
}

function flipCard() {
  card.classList.toggle("flip");
  statusMsg.textContent = "";
  setTimeout(resizeCard, 400);
}

resizeCard();
</script>

<script type="module">
/* =========================
   ðŸ”¥ Firebase Imports
========================= */
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword }
  from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
import { getFirestore, doc, setDoc }
from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

/* =========================
   ðŸ”¥ Your Firebase Config
========================= */
const firebaseConfig = {
  apiKey: "AIzaSyB3W5StEiqUhysp7cMpnoh64qelbY8CO4U",
  authDomain: "asterism-b8a45.firebaseapp.com",
  projectId: "asterism-b8a45",
  storageBucket: "asterism-b8a45.firebasestorage.app",
  messagingSenderId: "313916930564",
  appId: "1:313916930564:web:5f5cae392b66c27dea1351"
};

/* =========================
   ðŸ”¥ Initialize Firebase
========================= */
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

/* =========================
   ðŸ”¥ LOGIN
========================= */
const loginBtn = document.getElementById("loginBtn");
const statusMsg = document.getElementById("statusMsg");

loginBtn.addEventListener("click", async () => {
  const email = document.querySelector('.login input[type="email"]').value;
  const pass  = document.querySelector('.login input[type="password"]').value;

  try {
    await signInWithEmailAndPassword(auth, email, pass);
    statusMsg.textContent = "âœ… Login success!";
    window.location.href = "home.html";
  } catch (err) {
    statusMsg.textContent = err.message;
  }
});

/* =========================
   ðŸ”¥ REGISTER
========================= */
const registerBtn = document.getElementById("registerBtn");

registerBtn.addEventListener("click", async () => {

  const email = document.querySelector('.email-group input').value + "@asterism.com";
  const pass  = document.querySelector('input[name="register_password"]').value;

  const first = document.querySelector('input[name="first_name"]').value;
  const last  = document.querySelector('input[name="last_name"]').value;
  const middle = document.querySelector('input[name="middle_name"]').value;
  const contact = document.querySelector('input[name="contact_number"]').value;
  const country = document.querySelector('select[name="country"]').value;
  const gender = document.querySelector('select[name="gender"]').value;
  const birthdate = document.querySelector('input[name="birthdate"]').value;

  try {

    // âœ… create auth account
    const userCred = await createUserWithEmailAndPassword(auth, email, pass);

    // âœ… save profile to Firestore
    await setDoc(doc(db, "users", userCred.user.uid), {
      first,
      last,
      middle,
      contact,
      country,
      gender,
      birthdate,
      email,
      createdAt: new Date()
    });

    statusMsg.textContent = "âœ… Account created!";
    window.location.href = "home.html";

  } catch (err) {
    statusMsg.textContent = err.message;
  }

});
</script>

</body>
</html>
